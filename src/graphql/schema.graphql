
# Principals

type Query {
    ping: String
    users(filters: UserInput): [User]
    sessions: [Session]
    verifyEmail: msjToken
    reSendEmailVerification: Message
    profile: User
    logout: Message
    orders: [Order]
    categories(filters: CategoriesInput): [Category]
}

type Mutation {
    signUp(input: formSignUp): msjToken
    signIn(input: formSignIn): Token
    updateProfile(input: formUpdateProfile): Message
    updatePassword(input: formUpdatePassword): Message
    recover(input: formRecover): Message
    updatePasswordForRecovery(input: formUpdatePasswordForRecovery): Message
    addOrder(input: [FormOrderProduct]): ID
}

# Auxiliars

type Category {
    _id: ID
    name: String
    products: [Product]
    sub_categories: [Category]
}

input CategoriesInput {
    name: String
}

type OrderProduct {
    product: Product
    quantity: Int
}

input FormOrderProduct {
    product_id: ID!
    quantity: Int!
}

type Order {
    _id: ID
    user_id: ID
    created_at: String
    data: [OrderProduct]
}

type Product {
    name: String
    description: String
    stock: Int
    visible: Boolean
    photo: String
    max_order: Int
    discount: Int
    promotion: Boolean
}

input UserInput {
    _id: ID
    name: String
    lastname: String
    email: String
    account_verified: Boolean
    phone: String
}

type User {
    _id: ID
    name: String
    lastname: String
    email: String
    account_verified: Boolean
    phone: String
}

input formRecover {
    email: String!
}

input formSignUp {
    name: String!
    lastname: String!
    email: String!
    password: String!
    phone: String!
}

input formSignIn {
    email: String!
    password: String!
}

type msjToken {
    message: String
    access_token: String
}

input formUpdateProfile {
    name: String
    lastname: String
}

input formUpdatePassword {
    last_password: String!
    new_password: String!
}

input formUpdatePasswordForRecovery {
    new_password: String!
}

type Token {
    access_token: String
}

type Session {
    _id: ID
    user_id: ID
    status: Boolean
    start: String
    end: String
    hash_token: String
}

type Message {
    message: String
}